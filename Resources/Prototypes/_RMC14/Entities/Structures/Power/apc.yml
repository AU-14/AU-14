- type: entity
  noSpawn: true
  parent: BaseAPC
  id: RMCAPCBase
  name: area power controller
  components:
  - type: AccessReader
    access: [["CMAccessEngineering"]]
  - type: Sprite
    drawdepth: WallMountedItems
    sprite: _RMC14/Structures/Power/apc.rsi
    layers:
    - state: base
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
      visible: false
    - state: display-charging
      shader: unshaded
      map: ["enum.ApcVisualLayers.ChargeState"]
    - state: apcox-0
      shader: unshaded
      map: ["enum.ApcVisualLayers.InterfaceLock"]
    - state: apcox-1
      shader: unshaded
      map: ["enum.ApcVisualLayers.PanelLock"]
    - state: apco0-2
      shader: unshaded
      map: ["enum.ApcVisualLayers.Equipment"]
    - state: apco1-2
      shader: unshaded
      map: ["enum.ApcVisualLayers.Lighting"]
    - state: apco2-2
      shader: unshaded
      map: ["enum.ApcVisualLayers.Environment"]
  - type: PowerMonitoringDevice
    sprite: _RMC14/Structures/Power/apc.rsi
    state: base
  - type: Construction
    graph: RMAPC
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          CMSheetMetal1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: ContainerContainer
    containers:
      cell_slot: !type:ContainerSlot {}
  - type: PowerCellSlot
    cellSlotId: cell_slot
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
  - type: Charger
    slotId: cell_slot

# APC under construction
- type: entity
  noSpawn: true
  parent: APCFrame
  id: RMCAPCFrame
  components:
  - type: Sprite
    sprite: _RMC14/Structures/Power/apc.rsi
    state: panel
  - type: Construction
    graph: RMAPC
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          CMSheetMetal1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Constructed APC
- type: entity
  parent: RMCAPCBase
  id: RMCAPCConstructed
  suffix: APC, Open

# APCs in use
- type: entity
  parent: RMCAPCBase
  id: RMCAPCWeak
  suffix: APC, Weak
  components:
  - type: ContainerFill
    containers:
      cell_slot: [ RMCPowerCell ]

- type: entity
  parent: RMCAPCBase
  id: RMCAPCHigh
  suffix: APC, High
  components:
  - type: ContainerFill
    containers:
      cell_slot: [ RMCPowerCellHigh ]

- type: entity
  parent: RMCAPCBase
  id: RMCAPCSuper
  suffix: APC, Super
  components:
  - type: ContainerFill
    containers:
      cell_slot: [ RMCPowerCellSuper ]

- type: entity
  parent: RMCAPCBase
  id: RMCAPCHyper
  suffix: APC, Hyper
  components:
  - type: ContainerFill
    containers:
      cell_slot: [ RMCPowerCellHyper ]
